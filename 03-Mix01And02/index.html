<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-route.js"></script>

<body ng-app="storeApp">

<h1>Store</h1>
<div ng-view></div>

<script>
  var app = angular.module("storeApp", ["ngRoute"]);

  app.config(function($routeProvider) {
    $routeProvider
    .when("/products", {
        templateUrl : "products.html"
    })
    .when("/products/:product_id", {
        templateUrl : "product.html"
    })
    .otherwise({
        redirectTo: '/products'
    });
  });

  app.controller('ListController', ['$http', function($http) {
    var store = this;
    store.products = [];

    $http.get('products.json').success(function(data) {
      store.products = data;
    });
  }]);

  app.controller('DetailController', ['$http', '$routeParams', function($http, $routeParams) {
    var detail = this;
    detail.product = {};

    $http.get('products.json').success(function(data) {
      detail.product = data[$routeParams.product_id];
    });
  }]);


</script>

</body>
</html>


